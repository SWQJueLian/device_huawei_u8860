on init
     export LD_LIBRARY_PATH /vendor/lib:/system/lib:/data/cust/lib
     export EXTERNAL_STORAGE /mnt/sdcard
     export BOOTCLASSPATH /system/framework/core.jar:/system/framework/core-junit.jar:/system/framework/bouncycastle.jar:/system/framework/ext.jar:/system/framework/framework.jar:/system/framework/android.policy.jar:/system/framework/services.jar:/system/framework/apache-xml.jar:/system/framework/filterfw.jar:/system/framework/qcnvitems.jar:/system/framework/qcrilhook.jar

     mkdir /mnt/sdcard 0000 system system
     mkdir /mnt/sdcard2 0000 system system
     mkdir /.cust_backup
     mkdir /cust 
     mount vfat /dev/block/mmcblk0p1 /.cust_backup ro wait
     mount ext3 loop@.cust_backup/image/cust.img /cust ro
     symlink /mnt/sdcard /sdcard

on emmc-fs
# mount mmc partitions
     wait /dev/block/mmcblk0p12
     mount ext4 /dev/block/mmcblk0p12 /system rw barrier=1
     wait /dev/block/mmcblk0p13
     exec /system/bin/e2fsck -p /dev/block/mmcblk0p13
     mount ext4 /dev/block/mmcblk0p13 /data nosuid nodev barrier=1 noauto_da_alloc
     mount ext4 /dev/block/mmcblk0p6 /cache nosuid nodev barrier=1

     setrlimit 7 2048 2048
     chmod 0664 /dev/light
     chmod 0664 /dev/proximity
     chmod 0664 /dev/accel
     chmod 0664 /dev/compass_aot
     chmod 0664 /dev/akm8975_dev
     chmod 0664 /dev/compass_dev
     chmod 0664 /dev/gyro

     chown system system /sys/kernel/logger/log_main/enable
     chown system system /sys/kernel/logger/log_events/enable
     chown system system /sys/kernel/logger/log_radio/enable
     chown system system /sys/kernel/logger/log_main/priority
     chown system system /sys/kernel/logger/log_events/priority
     chown system system /sys/kernel/logger/log_radio/priority
     chown radio system /sys/class/leds/ptt_led/brightness
     chmod 664 /dev/input/event1
     chown system system /sys/devices/platform/msm_hsusb/gadget/sdstatus
     chown system system /sys/devices/platform/msm_hsusb/gadget/switchusb
     chown system system /sys/devices/platform/msm_hsusb/gadget/fixusb

     mkdir /data/misc/bluetooth 0770 bluetooth bluetooth
     chown bluetooth bluetooth /sys/module/bluetooth_power/parameters/power
     chown bluetooth bluetooth /sys/class/rfkill/rfkill0/type
     chown bluetooth bluetooth /sys/class/rfkill/rfkill0/state
     chown bluetooth bluetooth /proc/bluetooth/sleep/proto
     chown system system /sys/module/sco/parameters/disable_esco
     chmod 0660 /sys/module/bluetooth_power/parameters/power
     chmod 0660 /sys/class/rfkill/rfkill0/state
     chmod 0660 /proc/bluetooth/sleep/proto
     chmod 0660 /proc/bluetooth/clock/proto
     write  /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "ondemand"
     write  /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 368640
     chown bluetooth bluetooth /dev/ttyHS0
     chmod 0660 /dev/ttyHS0
     chown bluetooth bluetooth /sys/devices/platform/msm_serial_hs.0/clock
     chmod 0660 /sys/devices/platform/msm_serial_hs.0/clock

# USB google mode configuration
on property:sys.usb.config=mass_storage
     write /sys/class/android_usb/android0/idVendor 12d1
     write /sys/class/android_usb/android0/idProduct 1037
     write /sys/class/android_usb/android0/f_mass_storage/lun/file /system/cdrom/autorun.iso
     write /sys/class/android_usb/android0/f_mass_storage/lun/ro 1
     write /sys/class/android_usb/android0/f_mass_storage/lun/nofua 1
     write /sys/class/android_usb/android0/functions $sys.usb.config
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state $sys.usb.config

on property:sys.usb.config=mass_storage,adb
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12d1
     write /sys/class/android_usb/android0/idProduct 1038
     write /sys/class/android_usb/android0/f_mass_storage/lun/file /system/cdrom/autorun.iso
     write /sys/class/android_usb/android0/f_mass_storage/lun/ro 1
     write /sys/class/android_usb/android0/f_mass_storage/lun/nofua 1

# USB normal mode configuration
on property:sys.usb.config=serial,mass_storage
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12d1
     write /sys/class/android_usb/android0/idProduct 1035
     write /sys/class/android_usb/android0/iSerial cleanup
     write /sys/class/android_usb/android0/f_serial/transports smd,tty
     write /sys/class/android_usb/android0/f_mass_storage/lun/file /system/cdrom/autorun.iso
     write /sys/class/android_usb/android0/f_mass_storage/lun/ro 1
     write /sys/class/android_usb/android0/f_mass_storage/lun/nofua 1
     write /sys/class/android_usb/android0/functions $sys.usb.config
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state $sys.usb.config

on property:sys.usb.config=serial,mass_storage,adb
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12d1
     write /sys/class/android_usb/android0/idProduct 1035
     write /sys/class/android_usb/android0/iSerial cleanup
     write /sys/class/android_usb/android0/f_diag/clients  diag
     write /sys/class/android_usb/android0/f_serial/transports smd,tty
     write /sys/class/android_usb/android0/f_mass_storage/lun/file /system/cdrom/autorun.iso
     write /sys/class/android_usb/android0/f_mass_storage/lun/ro 1
     write /sys/class/android_usb/android0/f_mass_storage/lun/nofua 1
     write /sys/class/android_usb/android0/functions serial,mass_storage,adb,diag
     write /sys/class/android_usb/android0/enable 1
     start adbd
     setprop sys.usb.state $sys.usb.config

# USB tethering mode configuration
on property:sys.usb.config=rndis
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12D1
     write /sys/class/android_usb/android0/idProduct 1039
     write /sys/class/android_usb/android0/f_rndis/wceis 1
     write /sys/class/android_usb/android0/functions rndis
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state $sys.usb.config

on property:sys.usb.config=rndis,adb
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12D1
     write /sys/class/android_usb/android0/idProduct 1050
     write /sys/class/android_usb/android0/f_rndis/wceis 1
     write /sys/class/android_usb/android0/functions rndis,adb
     write /sys/class/android_usb/android0/enable 1
     start adbd
     setprop sys.usb.state $sys.usb.config

# USB MTP mode configuration
on property:sys.usb.config=mtp
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12d1
     write /sys/class/android_usb/android0/idProduct 1051
     write /sys/class/android_usb/android0/functions $sys.usb.config
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state $sys.usb.config

on property:sys.usb.config=mtp,adb
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12d1
     write /sys/class/android_usb/android0/idProduct 1052
     write /sys/class/android_usb/android0/functions $sys.usb.config
     write /sys/class/android_usb/android0/enable 1
     start adbd
     setprop sys.usb.state $sys.usb.config

# USB MTP mode configuration
on property:sys.usb.config=ptp
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12d1
     write /sys/class/android_usb/android0/idProduct 1053
     write /sys/class/android_usb/android0/functions $sys.usb.config
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state $sys.usb.config

on property:sys.usb.config=ptp,adb
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 12d1
     write /sys/class/android_usb/android0/idProduct 1054
     write /sys/class/android_usb/android0/functions $sys.usb.config
     write /sys/class/android_usb/android0/enable 1
     start adbd
     setprop sys.usb.state $sys.usb.config

service ds_fmc_appd /system/bin/ds_fmc_appd -p "rmnet0" -D
     class main
     group radio
     oneshot

on property:persist.data.ds_fmc_app.mode=1
     start ds_fmc_appd

service ims_regmanager /system/bin/exe-ims-regmanagerprocessnative
     class main
     user system
     group qcom_oncrpc net_bt_admin inet radio wifi

on property:persist.ims.regmanager.mode=1
     start ims_regmanager
    
service qcom-sh /system/bin/sh /init.qcom.sh
    user root
   oneshot    

service qmuxd /system/bin/qmuxd
     class main
     user root
     group root

service netmgrd /system/bin/netmgrd
     class main
     user root
 

on property:ro.use_data_netmgrd=false
     netmgr not supported on specific target
     stop netmgrd
     socket zygote stream 666

service wlan_detect /system/bin/wlan_detect
     class main
     user root
     group root
     oneshot

service wpa_supplicant /system/bin/wpa_supplicant -Dwext -ieth0 -W -c/data/misc/wifi/wpa_supplicant.conf
     class main
     disabled
     oneshot

service dhcpcd /system/bin/dhcpcd -BKL eth0
     class main
     disabled 
     oneshot

service hfag /system/bin/sdptool add --channel=10 HFAG
     user bluetooth
     group bluetooth net_bt_admin
     disabled
     oneshot

service hsag /system/bin/sdptool add --channel=11 HSAG
     user bluetooth
     group bluetooth net_bt_admin
     disabled
     oneshot

service opush /system/bin/sdptool add --channel=12 OPUSH
     user bluetooth
     group bluetooth net_bt_admin
     disabled
     oneshot

service pbap /system/bin/sdptool add --channel=19 PBAP
     user bluetooth
     group bluetooth net_bt_admin
     disabled
     oneshot

service bcm_hciattach /system/bin/sh /system/etc/bluetooth/init.bcm.bt.sh
     user bluetooth
     group qcom_oncrpc bluetooth net_bt_admin system
     disabled 
     oneshot 
    
service chip_power_on /system/bin/sh /system/etc/bluetooth/init.bcm.chip_on.sh
     user root
     group system
     disabled
     oneshot 
    
service chip_power_off /system/bin/sh /system/etc/bluetooth/init.bcm.chip_off.sh
     user root
     group system
     disabled
     oneshot
    
service hci_dev_up /system/bin/hci_dev_state --dev_up
     user root
     group bluetooth system
     disabled 
     oneshot
    
service hci_dev_down /system/bin/hci_dev_state --dev_down
     user root
     group bluetooth system
     disabled 
     oneshot    

service BtWiRfServer /system/xbin/RfTest
     user root
     group bluetooth net_bt_admin system  
     disabled
     oneshot

service btld /system/bin/btld
     user bluetooth system
     group bluetooth net_bt_admin system
     disabled 
     oneshot

service rmt_storage /system/bin/rmt_storage
     class core

service compassd /system/bin/compassd
     disabled
     oneshot
    
service akm8975 /system/bin/akmd8975
     disabled
     oneshot

service akm8962 /system/bin/akmd8962
     disabled
     oneshot

service callife /system/bin/callife
     oneshot

service filebackup /system/bin/filebackup
     class core
     socket filebackup stream 0600 radio system

service PTTKeyDaemon /system/bin/PTTKeyDaemon 
     oneshot

service gps_nmea /system/bin/port-bridge /dev/nmea /dev/ttyGS1
     disabled

service rmt_oeminfo /system/bin/rmt_oeminfo
     class core

service oem_rpc_svc /system/bin/oem_rpc_svc
     class core

service bugreport /system/bin/dumpstate -d -v -o /sdcard/bugreports/bugreport
     class core
     user root
     disabled
     oneshot
     keycodes 115 114

service applogcat /system/bin/logcat -v time -r 1024 -n 8 -f /sdcard/bugreports/applogcat-log
     class core
     disabled
     oneshot

service kmsglogcat /system/bin/kmsgcat -r 1024 -n 8 -f /sdcard/bugreports/kmsgcat-log
     class core
     disabled
     oneshot

service modemlogcat /system/bin/diag_mdlog -f /sdcard/diag_logs/Diag.cfg -o /sdcard/diag_logs
     class core
     disabled
     oneshot
